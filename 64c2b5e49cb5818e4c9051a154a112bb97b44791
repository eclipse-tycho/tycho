{
  "comments": [
    {
      "key": {
        "uuid": "2342637e_589e5001",
        "filename": "tycho-extras/tycho-pomless/src/main/java/org/eclipse/tycho/pomless/AbstractTychoMapping.java",
        "patchSetId": 2
      },
      "lineNbr": 131,
      "author": {
        "id": 171685
      },
      "writtenOn": "2019-11-25T15:02:14Z",
      "side": 1,
      "message": "Thinking a bit more about it I think here we should close the original stream first.\ninput.close();\nthen create a new one with \ninput \u003d new FileInputStream(file);\nthat will then be closed by the try {\n\n} finally {\n\n}\n\nmentioned below.",
      "revId": "64c2b5e49cb5818e4c9051a154a112bb97b44791",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ee0c0a7_1ff8f2f7",
        "filename": "tycho-extras/tycho-pomless/src/main/java/org/eclipse/tycho/pomless/AbstractTychoMapping.java",
        "patchSetId": 2
      },
      "lineNbr": 131,
      "author": {
        "id": 440
      },
      "writtenOn": "2019-11-25T16:48:14Z",
      "side": 1,
      "message": "I agree to closing the original stream. I don\u0027t agree to creating a new instance with the same name. The current code creates a new instance with a different name, and correctly closes all related resources of the new stream. It really only needs an additional \"input.close();\" before line 131.",
      "parentUuid": "2342637e_589e5001",
      "revId": "64c2b5e49cb5818e4c9051a154a112bb97b44791",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a59905bd_5b0f6604",
        "filename": "tycho-extras/tycho-pomless/src/main/java/org/eclipse/tycho/pomless/AbstractTychoMapping.java",
        "patchSetId": 2
      },
      "lineNbr": 131,
      "author": {
        "id": 171685
      },
      "writtenOn": "2019-11-25T18:12:57Z",
      "side": 1,
      "message": "I\u0027d better like to reasign a parameter instead of duplicating code or introducing new \"local\" variables to circumvent final modifier.\nAs this fixLocation is only used as a workaround here for xml files, the bug was not in that line but the line below it that was not changed in the first revision.",
      "parentUuid": "3ee0c0a7_1ff8f2f7",
      "revId": "64c2b5e49cb5818e4c9051a154a112bb97b44791",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1265271c_d35eceed",
        "filename": "tycho-extras/tycho-pomless/src/main/java/org/eclipse/tycho/pomless/AbstractTychoMapping.java",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 171685
      },
      "writtenOn": "2019-11-25T15:02:14Z",
      "side": 1,
      "message": "I think this should be protecting the input stream instead of the reader as mentioned before, something like\ntry {\nreturn read(new InputStreamReader(input, getPrimaryArtifactCharset()), file, options);\n} finally {\n  input.close() should be fine\n}",
      "revId": "64c2b5e49cb5818e4c9051a154a112bb97b44791",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b7b8a84_ad54b933",
        "filename": "tycho-extras/tycho-pomless/src/main/java/org/eclipse/tycho/pomless/AbstractTychoMapping.java",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 440
      },
      "writtenOn": "2019-11-25T16:48:14Z",
      "side": 1,
      "message": "Nope. The reader must be closed, too. This specific implementation leaves a StreamDecoder opened otherwise, if I get it right.\n\nBut independent of the specific implementation: Anything deriving from AutoClosable should be handled by try-with-resource nowadays. One should never create an instance without that, otherwise it\u0027s a resource leak.",
      "parentUuid": "1265271c_d35eceed",
      "revId": "64c2b5e49cb5818e4c9051a154a112bb97b44791",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c2421f2_a5498994",
        "filename": "tycho-extras/tycho-pomless/src/main/java/org/eclipse/tycho/pomless/AbstractTychoMapping.java",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 171685
      },
      "writtenOn": "2019-11-25T18:12:57Z",
      "side": 1,
      "message": "But then it has to be split into different local variables, closing \"wrapped\" stream is only needed for writers if one wants to prevent loosing data that is only flushed on close. For reading streams, this will only call close on the delegate streams so closing those will only leads to multiple close class on the input streams.",
      "parentUuid": "3b7b8a84_ad54b933",
      "revId": "64c2b5e49cb5818e4c9051a154a112bb97b44791",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4287b434_79f7ff86",
        "filename": "tycho-extras/tycho-pomless/src/main/java/org/eclipse/tycho/pomless/AbstractTychoMapping.java",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 440
      },
      "writtenOn": "2019-11-25T19:30:46Z",
      "side": 1,
      "message": "I don\u0027t get what you are trying to tell me.\n\nIf you argue that you know what the reader/writer does in its close() call and that you don\u0027t need to call close() for that reason, that\u0027s a really bad reasoning. The implementation details might change any time, and this code should not depend on the implementation details of other close() methods.\n\nOptimizing away some close() calls is absolutely not necessary. Easy to read code is way more important than micro-optimization.\n\nThat being said, do what you want, I don\u0027t feel like my input is welcome here.",
      "parentUuid": "5c2421f2_a5498994",
      "revId": "64c2b5e49cb5818e4c9051a154a112bb97b44791",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4979084b_f19a0931",
        "filename": "tycho-extras/tycho-pomless/src/main/java/org/eclipse/tycho/pomless/AbstractTychoMapping.java",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 171685
      },
      "writtenOn": "2019-11-25T20:53:14Z",
      "side": 1,
      "message": "Sorry don\u0027t want to be offending, from my point of view every feedback is welcome, that what reviews are for, english is not my native language, so maybe I\u0027m not always able to express everything in a correct way, sorry for that.\n\nI don\u0027t want to suggest any micro-optimization, but closing a stream (given as input parameters) should be the task of the caller (maybe that the problem her that the caller does not do this) and we should only close streams we create our self (even though closing a wrapped stream often means closing the underlying stream), hope this makes more sense. Anyways I hope we can soon remove this pice of code as the new Re: [takari/polyglot-maven] release is out!",
      "parentUuid": "4287b434_79f7ff86",
      "revId": "64c2b5e49cb5818e4c9051a154a112bb97b44791",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c4dcb97_9ace6203",
        "filename": "tycho-extras/tycho-pomless/src/main/java/org/eclipse/tycho/pomless/AbstractTychoMapping.java",
        "patchSetId": 2
      },
      "lineNbr": 146,
      "author": {
        "id": 171685
      },
      "writtenOn": "2019-11-25T15:02:14Z",
      "side": 1,
      "message": "I think the previous approach was fine here, closing the (File)Inputstream should be sufficent.",
      "revId": "64c2b5e49cb5818e4c9051a154a112bb97b44791",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5bc6acd6_7f76576c",
        "filename": "tycho-extras/tycho-pomless/src/main/java/org/eclipse/tycho/pomless/AbstractTychoMapping.java",
        "patchSetId": 2
      },
      "lineNbr": 146,
      "author": {
        "id": 440
      },
      "writtenOn": "2019-11-25T16:48:14Z",
      "side": 1,
      "message": "No. See above.",
      "parentUuid": "0c4dcb97_9ace6203",
      "revId": "64c2b5e49cb5818e4c9051a154a112bb97b44791",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}